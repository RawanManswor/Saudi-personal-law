{% extends "base.html" %}
{% block content %}
<div class="container-fluid h-100">
	<div class="row justify-content-center h-100 ">
		<div class=" chat col-sm-6 col-md-8 col-xl-10">
			<div class="card card-chat">
				<div class="card-header msg_head">
					<div class="d-flex justify-content-start bd-highlight">
						<div class="img_cont ">
							<img src="https://i.ibb.co/fSNP7Rz/icons8-chatgpt-512.png" class="rounded-circle user_img">
							<span class="online_icon"></span>
						</div>
						<div class="user_info ">
							<span>قانون الأحوال الشخصية السعودي</span>
							<!-- <p>Ask me anything!</p> -->
						</div>
						
					</div>
				</div>
				<div id="messageFormeight" class="card-body msg_card_body">

				</div>
				<div class="card-footer">
					<form id="messageArea" class="input-group">
						<button type="submit" id="send" class="input-group-text send_btn px-4"><i
							class="fas fa-location-arrow"></i></button>
						<input type="text" id="text" name="msg" placeholder="أكتب رسالتك ..." autocomplete="off"
							class="form-control type_msg" required />
						<!-- <div class="input-group-append"> -->
							
						<!-- </div> -->
					</form>
				</div>
			</div>
		</div>
	</div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>

<script>
	$(document).ready(function () {
		$("#messageArea").on("submit", function (event) {
			const date = new Date();
			const hour = date.getHours();
			const minute = date.getMinutes();
			const str_time = hour + ":" + minute;
			var rawText = $("#text").val();

			var userHtml = '<div class="d-flex justify-content-start mb-4"><div class="img_cont_msg"><img src="https://i.ibb.co/d5b84Xw/Untitled-design.png" class="rounded-circle user_img_msg"></div><div class="msg_cotainer_send">' + rawText + '<span class="msg_time_send">' + str_time + '</span></div></div>';

			$("#text").val("");
			$("#messageFormeight").append(userHtml);

			$.ajax({
				data: {
					msg: rawText,
				},
				type: "POST",
				url: "/get",
			}).done(function (data) {
				var botHtml = '<div class="d-flex justify-content-end mb-4"><div class="msg_cotainer">' + data + '<span class="msg_time">' + str_time + '</span></div><div class="img_cont_msg"><img src="https://i.ibb.co/fSNP7Rz/icons8-chatgpt-512.png" class="rounded-circle user_img_msg"></div></div>';
				$("#messageFormeight").append($.parseHTML(botHtml));
			});
			event.preventDefault();
		});
	});
</script>
{% endblock %}  